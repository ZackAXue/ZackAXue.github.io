<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>MyBlog</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/font-awesome.min.css" rel="stylesheet"><link href="/css/main.css" rel="stylesheet"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="wrap"><nav class="page-navigation"><div class="nav-container"><div class="page-header-logo"><h1 class="prince-log"><a href="/" class="home-link">秋</a></h1></div><button type="button" data-toggle="collapse" data-target=".main-nav-items" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><ul class="collapse navbar-collapse main-nav-items"><li class="menu-item"><a href="/" target="_self">HOME</a></li><li class="menu-item"><a href="/archives/" target="_self">ARCHIVE</a></li><li class="menu-item"><a href="/about/" target="_self">ABOUT</a></li></ul></div></nav><main class="prince-container"><div class="articles"><article class="post-block"><h2 class="post-title"><a href="/2022/03/28/Summary-of-Projects-for-281-370/" class="post-link">Summary of Projects for 281&amp;370</a></h2><div class="post-info">Mar 28th 2022</div><div class="post-entry"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>鸽了一周，今天开始恢复更新。就先总结过去一周所做的两个 Project，Pipelined Simulator &amp; SillyQL。</p>
<h3 id="Pipelined-Simulator"><a href="#Pipelined-Simulator" class="headerlink" title="Pipelined Simulator"></a>Pipelined Simulator</h3><p>370 的 p3，大概就是写一些代码模拟 pipeline 的运行过程，利用 Detect and Forward 处理 data Hazard，使用 branch-not-taken 解决 Control Hazard。因为暂时不会使用 c 语言的并行处理，所以利用两个 struct， State 和 newState 来模拟时钟上升沿 state 的瞬时更新。开写之前我其实没有完全理解这个方法，之后修改时又漏掉了 eq，给我造成了很大麻烦。 所以教训是要严格遵守 spec 的要求，例如 State 都作为左值，newState 都作为右值。整体而言 p3 难度不算大，我个人比较喜欢这种概念性比较强的 Project。</p>
<h3 id="SillyQL"><a href="#SillyQL" class="headerlink" title="SillyQL"></a>SillyQL</h3><p>模拟一个简陋版的 sql，spec 指定了几个功能，首先实现 create，print，insert，remove，delete，然后实现 generate（给一个 col 加 hash&#x2F;bst 以提高查找速度），join（两个 table 的交集）。写完 generate 之后要对 print 做一些优化（’&gt;’, ‘&lt;’时使用 bst 的 upper_bound， ‘&#x3D;’ 时使用 hash)。</p>
<p>这里并不需要对 delete 做什么优化，因为‘&#x3D;’时 remove_if 和使用 hash 查找从后往前 delte 时间复杂度都是 O(n)。delete 结束后需要 rehash&#x2F;rebst。此处我以为‘&#x3D;’时可以直接 erase bst 里的 key，这个操作导致了很严重的 bug，因为 bst 的 value 里存储的是每一个 key 对应的 row 的 index，如果某一行被 delete，之后所有 row 的 index 都会前移，所以会导致 bst 存储的 index 完全失效。</p>
<p>p3 算是目前为止我接触的比较大的 project，spec25 页，程序大概 900 行。因为比较缺乏大型 project 的经验，前后写了很久，debug 花了一天半，因此误了好几节 recording。好在程序结构问题，不用做额外的 speed &amp; memory 优化。所以，之后的大型 project 一定要早点开始。安排好时间，起码不要误课，而且一直做一件事效率有点低。。。</p>
<p>总之，相比这学期开始，代码能力也算有一些提升，但还有很长路要走啊…<br>结尾附图一张<br><img src="/images/5.jpg"></p>
</div><div class="post-meta"><a href="/2022/03/28/Summary-of-Projects-for-281-370/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/Summary/" rel="tag">Summary</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/23/Take-a-day-off-work-2/" class="post-link">Take a day off work</a></h2><div class="post-info">Mar 23rd 2022</div><div class="post-entry"><h1 id="今天还是不得不请假一天"><a href="#今天还是不得不请假一天" class="headerlink" title="今天还是不得不请假一天"></a>今天还是不得不请假一天</h1><p>连续写了三天的 sillyQL，说实话感觉一直做一件事效率真的很低，明天开始会恢复做题并且补一些 recording，希望能在周六前过掉 ag。<br><img src="/images/4.jpg"></p>
</div><div class="post-meta"><a href="/2022/03/23/Take-a-day-off-work-2/" class="article-more">Read More</a></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/22/LeetCode-Daily-Question-15/" class="post-link">LeetCode Daily Question 15</a></h2><div class="post-info">Mar 22nd 2022</div><div class="post-entry"><h2 id="3-月-22-日-每日一题"><a href="#3-月-22-日-每日一题" class="headerlink" title="3 月 22 日 每日一题"></a>3 月 22 日 每日一题</h2><hr>
<h3 id="题目：287-Find-the-Duplicate-Number"><a href="#题目：287-Find-the-Duplicate-Number" class="headerlink" title="题目：287. Find the Duplicate Number"></a>题目：287. Find the Duplicate Number</h3><p>Given an array of integers nums containing n + 1 integers where each integer is in the range [1, n] inclusive.</p>
<p>There is only one repeated number in nums, return this repeated number.</p>
<p>You must solve the problem without modifying the array nums and uses only constant extra space.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line"></span><br><span class="line">Input: nums = [1,3,4,2,2]</span><br><span class="line">Output: 2</span><br><span class="line">Example 2:</span><br><span class="line"></span><br><span class="line">Input: nums = [3,1,3,4,2]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>hashmap 应该算这道题的暴力解法，等肝完 281project 之后可能会在这里更新其他方法。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findDuplicate</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; counts;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">            <span class="keyword">auto</span> &amp;iter = counts[nums[i]];</span><br><span class="line">            iter++;</span><br><span class="line">            <span class="keyword">if</span>(iter == <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">return</span> nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><a href="/2022/03/22/LeetCode-Daily-Question-15/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a>, <a class="tag-link" href="/tags/hashMap/" rel="tag">hashMap</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/21/Take-a-day-off-work-1/" class="post-link">Take a day off work</a></h2><div class="post-info">Mar 21st 2022</div><div class="post-entry"><h1 id="请假一天"><a href="#请假一天" class="headerlink" title="请假一天"></a>请假一天</h1><p>又是嗯赶 281，370project 的一天，暂时没时间做 leetCode 了，写完 project 后会在这里更新经验教训。<br>附图一张<br><img src="/images/3.jpg"></p>
</div><div class="post-meta"><a href="/2022/03/21/Take-a-day-off-work-1/" class="article-more">Read More</a></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/20/Take-a-day-off-work/" class="post-link">Take a day off work</a></h2><div class="post-info">Mar 20th 2022</div><div class="post-entry"><h1 id="请假一天"><a href="#请假一天" class="headerlink" title="请假一天"></a>请假一天</h1><p>今天嗯赶了一天 project，大概是来不及写题了，请假一天。<br><img src="/images/2.jpg"></p>
</div><div class="post-meta"><a href="/2022/03/20/Take-a-day-off-work/" class="article-more">Read More</a></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/19/LeetCode-Daily-Question-14/" class="post-link">LeetCode Daily Question 14</a></h2><div class="post-info">Mar 19th 2022</div><div class="post-entry"><h2 id="3-月-19-日-每日一题"><a href="#3-月-19-日-每日一题" class="headerlink" title="3 月 19 日 每日一题"></a>3 月 19 日 每日一题</h2><hr>
<h3 id="题目：167-Two-Sum-II-Input-Array-Is-Sorted"><a href="#题目：167-Two-Sum-II-Input-Array-Is-Sorted" class="headerlink" title="题目：167. Two Sum II - Input Array Is Sorted"></a>题目：167. Two Sum II - Input Array Is Sorted</h3><p>Given a 1-indexed array of integers numbers that is already sorted in non-decreasing order, find two numbers such that they add up to a specific target number. Let these two numbers be numbers[index1] and numbers[index2] where 1 &lt;&#x3D; index1 &lt; index2 &lt;&#x3D; numbers.length.</p>
<p>Return the indices of the two numbers, index1 and index2, added by one as an integer array [index1, index2] of length 2.</p>
<p>The tests are generated such that there is exactly one solution. You may not use the same element twice.</p>
<p>Your solution must use only constant extra space.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line"></span><br><span class="line">Input: numbers = [2,7,11,15], target = 9</span><br><span class="line">Output: [1,2]</span><br><span class="line">Explanation: The sum of 2 and 7 is 9. Therefore, index1 = 1, index2 = 2. We return [1, 2].</span><br><span class="line">Example 2:</span><br><span class="line"></span><br><span class="line">Input: numbers = [2,3,4], target = 6</span><br><span class="line">Output: [1,3]</span><br><span class="line">Explanation: The sum of 2 and 4 is 6. Therefore index1 = 1, index2 = 3. We return [1, 3].</span><br><span class="line">Example 3:</span><br><span class="line"></span><br><span class="line">Input: numbers = [-1,0], target = -1</span><br><span class="line">Output: [1,2]</span><br><span class="line">Explanation: The sum of -1 and 0 is -1. Therefore index1 = 1, index2 = 2. We return [1, 2].</span><br></pre></td></tr></table></figure>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这道题可以说是 15. 3Sum 的弱化版，思路很简单（竟然是道 medium），双指针移动，找到 total &#x3D; target 时 return。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; numbers, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; res;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right = <span class="built_in">int</span>(numbers.<span class="built_in">size</span>()) - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            <span class="type">int</span> total = numbers[left] + numbers[right];</span><br><span class="line">            <span class="keyword">if</span>(total &lt; target)</span><br><span class="line">                left++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(total &gt; target)</span><br><span class="line">                right--;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(total == target)&#123;</span><br><span class="line">                res.<span class="built_in">push_back</span>(left + <span class="number">1</span>);</span><br><span class="line">                res.<span class="built_in">push_back</span>(right + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><a href="/2022/03/19/LeetCode-Daily-Question-14/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/binarySearch/" rel="tag">binarySearch</a>, <a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/18/LeetCode-Daily-Question-13/" class="post-link">LeetCode Daily Question 13</a></h2><div class="post-info">Mar 18th 2022</div><div class="post-entry"><h2 id="3-月-18-日-每日一题"><a href="#3-月-18-日-每日一题" class="headerlink" title="3 月 18 日 每日一题"></a>3 月 18 日 每日一题</h2><hr>
<h3 id="题目：Prefix-Replacement"><a href="#题目：Prefix-Replacement" class="headerlink" title="题目：Prefix Replacement"></a>题目：Prefix Replacement</h3><p>Prefixes are words that can be followed by other letters to form a longer word — let’s call this final, combined word the successor. For example, the prefix “an” followed by the word “other” forms the word “another.” Here, “an” is the prefix and “another” is the successor.<br>Given a dictionary consisting of many prefixes and a sentence, you need to replace all the successors in the sentence with the prefix forming it. If a successor has many prefixes that can form it, replace it with the prefix with the shortest length.<br>The input will only have lower-case letters. Return the new sentence in a vector of strings.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br><span class="line">Prefixes: [&quot;cat&quot;, &quot;bat&quot;, &quot;rat&quot;]</span><br><span class="line">Sentence: [&quot;the&quot;, &quot;cattle&quot;, &quot;was&quot;, &quot;rattled&quot;, &quot;by&quot;, &quot;the&quot;, &quot;battery&quot;] Output: [&quot;the&quot;, &quot;cat&quot;, &quot;was&quot;, &quot;rat&quot;, &quot;by&quot;, &quot;the&quot;, &quot;bat&quot;]</span><br></pre></td></tr></table></figure>

<p>mplementation: Your solution must run in O(PM + NM^2) time, where P represents the number of prefixes in the prefix vector, N represents the number of words in the sentence vector, and M represents the length of the longest string in the sentence vector.</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>今天这道题来自 281lab 的 handwritten problem。 基本思路是利用 set 存储 prefix。遍历每一个 word 的每一个 character，如果可以在 set 里找到对应 prefix 则 push，prefix，否则 push 原本的 word。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;string&gt; <span class="title">replace_words</span><span class="params">(<span class="type">const</span> vector&lt;string&gt;&amp; prefixes,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="type">const</span> vector&lt;string&gt;&amp; sentence)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">    unordered_set&lt;string&gt; pref;</span><br><span class="line">    vector&lt;string&gt; res;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> prefix: prefixes)&#123;</span><br><span class="line">        pref.<span class="built_in">insert</span>(prefix);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> word: sentence)&#123;</span><br><span class="line">        <span class="type">bool</span> isInsert = <span class="literal">true</span>;</span><br><span class="line">        string temp = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> character: word)&#123;</span><br><span class="line">            temp += character;</span><br><span class="line">            <span class="keyword">if</span>(pref.<span class="built_in">count</span>(temp))&#123;</span><br><span class="line">                res.<span class="built_in">push_back</span>(temp);</span><br><span class="line">                isInsert = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(isInsert)</span><br><span class="line">            res.<span class="built_in">push_back</span>(word);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><a href="/2022/03/18/LeetCode-Daily-Question-13/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a>, <a class="tag-link" href="/tags/set/" rel="tag">set</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/17/LeetCode-Daily-Question-12/" class="post-link">LeetCode Daily Question 12</a></h2><div class="post-info">Mar 17th 2022</div><div class="post-entry"><h2 id="3-月-17-日-每日一题"><a href="#3-月-17-日-每日一题" class="headerlink" title="3 月 17 日 每日一题"></a>3 月 17 日 每日一题</h2><hr>
<h3 id="题目：146-LRU-Cache"><a href="#题目：146-LRU-Cache" class="headerlink" title="题目：146. LRU Cache"></a>题目：146. LRU Cache</h3><p>Design a data structure that follows the constraints of a Least Recently Used (LRU) cache.</p>
<p>Implement the LRUCache class:</p>
<p>LRUCache(int capacity) Initialize the LRU cache with positive size capacity.<br>int get(int key) Return the value of the key if the key exists, otherwise return -1.<br>void put(int key, int value) Update the value of the key if the key exists. Otherwise, add the key-value pair to the cache. If the number of keys exceeds the capacity from this operation, evict the least recently used key.<br>The functions get and put must each run in O(1) average time complexity.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">[&quot;LRUCache&quot;, &quot;put&quot;, &quot;put&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;get&quot;]</span><br><span class="line">[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]</span><br><span class="line">Output</span><br><span class="line">[null, null, null, 1, null, -1, null, -1, 3, 4]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">LRUCache lRUCache = new LRUCache(2);</span><br><span class="line">lRUCache.put(1, 1); // cache is &#123;1=1&#125;</span><br><span class="line">lRUCache.put(2, 2); // cache is &#123;1=1, 2=2&#125;</span><br><span class="line">lRUCache.get(1);    // return 1</span><br><span class="line">lRUCache.put(3, 3); // LRU key was 2, evicts key 2, cache is &#123;1=1, 3=3&#125;</span><br><span class="line">lRUCache.get(2);    // returns -1 (not found)</span><br><span class="line">lRUCache.put(4, 4); // LRU key was 1, evicts key 1, cache is &#123;4=4, 3=3&#125;</span><br><span class="line">lRUCache.get(1);    // return -1 (not found)</span><br><span class="line">lRUCache.get(3);    // return 3</span><br><span class="line">lRUCache.get(4);    // return 4</span><br></pre></td></tr></table></figure>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这道题出现的时间很合适，刚好 370 讲到 Cache。<br>本题的思路是使用一个 list 存储 key&#x2F;value pairs，通过对 pair 位置的调整，以实现 front 为 most recently used，back 为 least recently used。<br>为了达到 O（1）的 search，我们还需要用一个 hashmap 存储指向每一个 pair 的 iterator，并以 pair 的 key 作为 hashmap 的 key。<br>实现时通过 splice 将一个 node 移动到 list 的 front。put 可以分为三种情况：exit， not exit &amp;&amp; full 和 not exit &amp; not full。顺便 map 的 erase 既可以使用 iterator，也可以直接用 key。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> capacity;</span><br><span class="line">    list&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; cache;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>, list&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;::iterator&gt; cacheMap;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">LRUCache</span>(<span class="type">int</span> capacity):capacity&#123;capacity&#125; &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cacheMap.<span class="built_in">find</span>(key) == cacheMap.<span class="built_in">end</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="comment">//move to the front</span></span><br><span class="line">        cache.<span class="built_in">splice</span>(cache.<span class="built_in">begin</span>(), cache, cacheMap.<span class="built_in">find</span>(key)-&gt;second);</span><br><span class="line">        <span class="keyword">return</span> cacheMap.<span class="built_in">find</span>(key)-&gt;second-&gt;second;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; temp&#123;key, value&#125;;</span><br><span class="line">        <span class="keyword">if</span>(cacheMap.<span class="built_in">find</span>(key) != cacheMap.<span class="built_in">end</span>())&#123;</span><br><span class="line">            cacheMap[key]-&gt;second = value;</span><br><span class="line">            <span class="comment">//move to the front</span></span><br><span class="line">            cache.<span class="built_in">splice</span>(cache.<span class="built_in">begin</span>(), cache, cacheMap.<span class="built_in">find</span>(key)-&gt;second);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cacheMap.<span class="built_in">size</span>() == capacity)&#123;</span><br><span class="line">            <span class="comment">//delete least recently</span></span><br><span class="line">            cacheMap.<span class="built_in">erase</span>(cache.<span class="built_in">back</span>().first);</span><br><span class="line">            cache.<span class="built_in">pop_back</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//add</span></span><br><span class="line">        cache.<span class="built_in">push_front</span>(temp);</span><br><span class="line">        cacheMap[key] = cache.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><a href="/2022/03/17/LeetCode-Daily-Question-12/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a>, <a class="tag-link" href="/tags/hashMap/" rel="tag">hashMap</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/16/LeetCode-Daily-Question-11/" class="post-link">LeetCode Daily Question 11</a></h2><div class="post-info">Mar 16th 2022</div><div class="post-entry"><h2 id="3-月-16-日-每日一题"><a href="#3-月-16-日-每日一题" class="headerlink" title="3 月 16 日 每日一题"></a>3 月 16 日 每日一题</h2><hr>
<h3 id="题目：953-Verifying-an-Alien-Dictionary"><a href="#题目：953-Verifying-an-Alien-Dictionary" class="headerlink" title="题目：953. Verifying an Alien Dictionary"></a>题目：953. Verifying an Alien Dictionary</h3><p>In an alien language, surprisingly, they also use English lowercase letters, but possibly in a different order. The order of the alphabet is some permutation of lowercase letters.</p>
<p>Given a sequence of words written in the alien language, and the order of the alphabet, return true if and only if the given words are sorted lexicographically in this alien language.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Input: words = [&quot;hello&quot;,&quot;leetcode&quot;], order = &quot;hlabcdefgijkmnopqrstuvwxyz&quot;</span><br><span class="line">Output: true</span><br><span class="line">Explanation: As &#x27;h&#x27; comes before &#x27;l&#x27; in this language, then the sequence is sorted.</span><br><span class="line">Example 2:</span><br><span class="line"></span><br><span class="line">Input: words = [&quot;word&quot;,&quot;world&quot;,&quot;row&quot;], order = &quot;worldabcefghijkmnpqstuvxyz&quot;</span><br><span class="line">Output: false</span><br><span class="line">Explanation: As &#x27;d&#x27; comes after &#x27;l&#x27; in this language, then words[0] &gt; words[1], hence the sequence is unsorted.</span><br><span class="line">Example 3:</span><br><span class="line"></span><br><span class="line">Input: words = [&quot;apple&quot;,&quot;app&quot;], order = &quot;abcdefghijklmnopqrstuvwxyz&quot;</span><br><span class="line">Output: false</span><br><span class="line">Explanation: The first three characters &quot;app&quot; match, and the second string is shorter (in size.) According to lexicographical rules &quot;apple&quot; &gt; &quot;app&quot;, because &#x27;l&#x27; &gt; &#x27;∅&#x27;, where &#x27;∅&#x27; is defined as the blank character which is less than any other character (More info).</span><br></pre></td></tr></table></figure>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>本题使用 hashmap 记录每一个字母的相对大小，之后使用嵌套的 for 循环将 word 的每一个字符修改成字符的相对大小。最后使用 is_sorted 函数判断顺序即可。<br>时间复杂度 O(ns)</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isAlienSorted</span><span class="params">(vector&lt;string&gt;&amp; words, string order)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; orders;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; order.<span class="built_in">length</span>(); i++)&#123;</span><br><span class="line">            orders[order[i] - <span class="string">&#x27;a&#x27;</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;word: words)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;c: word)&#123;</span><br><span class="line">                c = orders[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">is_sorted</span>(words.<span class="built_in">begin</span>(), words.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>BTW，今天晚上看到一个很有意思的视频。</p>
<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
  <iframe src="//player.bilibili.com/player.html?aid=552256181&bvid=BV1zi4y1C77b&cid=550949118&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"></iframe>
</div>
某种程度上说，我们都是推着巨石的西西弗斯。
</div><div class="post-meta"><a href="/2022/03/16/LeetCode-Daily-Question-11/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a>, <a class="tag-link" href="/tags/hashMap/" rel="tag">hashMap</a></div></div></article><article class="post-block"><h2 class="post-title"><a href="/2022/03/15/LeetCode-Daily-Question-10/" class="post-link">LeetCode Daily Question 10</a></h2><div class="post-info">Mar 15th 2022</div><div class="post-entry"><h2 id="3-月-15-日-每日一题"><a href="#3-月-15-日-每日一题" class="headerlink" title="3 月 15 日 每日一题"></a>3 月 15 日 每日一题</h2><hr>
<h3 id="题目：380-Insert-Delete-GetRandom-O-1"><a href="#题目：380-Insert-Delete-GetRandom-O-1" class="headerlink" title="题目：380. Insert Delete GetRandom O(1)"></a>题目：380. Insert Delete GetRandom O(1)</h3><p>Implement the RandomizedSet class:</p>
<p>RandomizedSet() Initializes the RandomizedSet object.<br>bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.<br>bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.<br>int getRandom() Returns a random element from the current set of elements (it’s guaranteed that at least one element exists when this method is called). Each element must have the same probability of being returned.<br>You must implement the functions of the class such that each function works in average O(1) time complexity.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Example 1:</span><br><span class="line"></span><br><span class="line">Input</span><br><span class="line">[&quot;RandomizedSet&quot;, &quot;insert&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;]</span><br><span class="line">[[], [1], [2], [2], [], [1], [2], []]</span><br><span class="line">Output</span><br><span class="line">[null, true, false, true, 2, true, false, 2]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">RandomizedSet randomizedSet = new RandomizedSet();</span><br><span class="line">randomizedSet.insert(1); // Inserts 1 to the set. Returns true as 1 was inserted successfully.</span><br><span class="line">randomizedSet.remove(2); // Returns false as 2 does not exist in the set.</span><br><span class="line">randomizedSet.insert(2); // Inserts 2 to the set, returns true. Set now contains [1,2].</span><br><span class="line">randomizedSet.getRandom(); // getRandom() should return either 1 or 2 randomly.</span><br><span class="line">randomizedSet.remove(1); // Removes 1 from the set, returns true. Set now contains [2].</span><br><span class="line">randomizedSet.insert(2); // 2 was already in the set, so return false.</span><br><span class="line">randomizedSet.getRandom(); // Since 2 is the only number in the set, getRandom() will always return 2.</span><br></pre></td></tr></table></figure>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>本题使用 hashmap 记录每一个 val 在 vector 的 index，以达到 O(1)的 search。 O(1) remove 通过将 val 位置和 vector 末尾值的位置调换再 pop 实现，需要注意的是 swap 之前需要先更新 hashmap 内 vector 末尾值的 index。getRomdom 通过 rand()%nums.size()实现。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RandomizedSet</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">RandomizedSet</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(indexs.<span class="built_in">find</span>(val) != indexs.<span class="built_in">end</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        nums.<span class="built_in">push_back</span>(val);</span><br><span class="line">        indexs[val] = <span class="built_in">int</span>(nums.<span class="built_in">size</span>() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(indexs.<span class="built_in">find</span>(val) == indexs.<span class="built_in">end</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        indexs[nums[nums.<span class="built_in">size</span>() - <span class="number">1</span>]] = indexs[val];</span><br><span class="line">        <span class="built_in">swap</span>(nums[indexs[val]], nums[nums.<span class="built_in">size</span>() - <span class="number">1</span>]);</span><br><span class="line">        nums.<span class="built_in">pop_back</span>();</span><br><span class="line">        indexs.<span class="built_in">erase</span>(val);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="built_in">rand</span>() % nums.<span class="built_in">size</span>()];</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; indexs;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; nums;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</div><div class="post-meta"><a href="/2022/03/15/LeetCode-Daily-Question-10/" class="article-more">Read More</a><div class="post-tags-box"><a class="tag-link" href="/tags/dailyQuestion/" rel="tag">dailyQuestion</a>, <a class="tag-link" href="/tags/hashMap/" rel="tag">hashMap</a></div></div></article></div><div class="paginator"><div class="prev-wrap col-md-6 col-xs-6"><i class="fa fa-angle-double-left"></i><a href="/page/2/" class="prev-page">Previous</a></div><div class="next-wrap col-md-6 col-xs-6"><a href="/page/4/" class="next-page">Next</a><i class="fa fa-angle-double-right"></i></div></div></main></div><footer><div class="copyright"><p>Crafted with <i class="fa fa-heart"></i> by&nbsp;秋&nbsp;|&nbsp;<a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yiliashaw/hexo-theme-prince" target="_blank">Prince</a> by SHAW</p></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.0.47/jquery.fancybox.min.js"></script><script src="/js/script.js"></script></body></html>